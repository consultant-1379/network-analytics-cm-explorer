<?xml version="1.0" encoding="UTF-8"?>
<!--
	Copyright (c) 2017 Ericsson AB.
	All rights reserved

	DX ECIM Tool-chain generated this file on Dec 12, 2017 3:26:27 PM using:
	* com.ericsson.ecim.m2m 2.15.0.201710201249
	* com.ericsson.ecim.dsl 2.15.0.201710201249
	* com.ericsson.ecim.edm 2.15.0.201710201249
--><!DOCTYPE models SYSTEM "mp.dtd">
<models>
    <dtdVersion>H</dtdVersion>
    <momMetaData>
        <momTitle>title</momTitle>
        <momSubTitle>sub title</momSubTitle>
        <momIdentity>
            <docNum>0</docNum>
            <docLang>English</docLang>
            <docRev>0</docRev>
            <docDate>date</docDate>
        </momIdentity>
        <createdBy>
            <signature>EAB/FJP/TA UABERPE</signature>
        </createdBy>
        <approvedBy>
            <signature>EAB/FJP/TA UABERPE</signature>
        </approvedBy>
    </momMetaData>
    <mim author="EAB/FJP/TA UABERPE" contact="EAB/FJP/TA UABERPE" correction="0" date="" docNo="" name="RtnPBRIPv4" namespace="urn:com:ericsson:ecim:RtnPBRIPv4" namespacePrefix="rtnpbripv4" organization="" release="5" revision="" variant="Model" version="1">
        <description>ECIM T Policy Based Routing.</description>
        <domainExtension domain="ECIM">
            <extension name="ecimMomName" value="ECIM_T_PBR_IPv4"/>
            <extension name="ecimMomVersion" value="2"/>
            <extension name="ecimMomRelease" value="0"/>
            <extension name="ecimMomCorrection" value="0"/>
            <extension name="immNamespace" value="MOM_NAME"/>
        </domainExtension>
        <implements correction="0" name="ECIM_T_PBR_IPv4" release="0" version="2"/>
        <enum name="PBRNextHopState">
            <description>The reachability of the next hop router and whether the NextHop is currently the active NextHop for the routing rule. </description>
            <enumMember name="UNREACHABLE">
                <description>The NextHop is unreachable. </description>
                <value>0</value>
            </enumMember>
            <enumMember name="AVAILABLE">
                <description>The NextHop is reachable.  &#13;
&#13;
The route is not active. </description>
                <value>1</value>
            </enumMember>
            <enumMember name="ACTIVE">
                <description>The NextHop is reachable.  &#13;
&#13;
The route is active.</description>
                <value>2</value>
            </enumMember>
        </enum>
        <derivedDataType name="DistanceValueType">
            <description>Distance Value Type.</description>
            <domainExtension domain="ECIM">
                <extension name="originatingMimVersion" value="1"/>
                <extension name="originatingMimRelease" value="3"/>
                <extension name="originatingMimName" value="RtnCommonLibrary"/>
            </domainExtension>
            <baseType>
                <int16>
                    <range>
                        <min>1</min>
                        <max>255</max>
                    </range>
                    <ranges>
                        <subrange>
                            <min>1</min>
                            <max>255</max>
                        </subrange>
                    </ranges>
                </int16>
            </baseType>
        </derivedDataType>
        <derivedDataType name="Ipv4RouteAddressAndPrefixLengthStr">
            <description>'Unicast IPv4 address'/'prefix length' string.&#13;
&#13;
Address should be specified in dotted-quad decimal notation in accordance with RFC791, without leading 0s.&#13;
IPv4 address within range [1-126,128-223].[0-255].[0-255].[0-255], 7-15 characters. Prefix is a number 0 to 32.&#13;
0.0.0.0/0 default route is allowed too.&#13;
&#13;
Example: 1.1.2.2/28</description>
            <domainExtension domain="ECIM">
                <extension name="originatingMimVersion" value="1"/>
                <extension name="originatingMimRelease" value="3"/>
                <extension name="originatingMimName" value="RtnCommonLibrary"/>
            </domainExtension>
            <baseType>
                <string>
                    <validValues>(^(((([1-9]|22[0-3]|2[01][0-9]|1[013456789][0-9]|12[012345689]|[1-9][0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9]))/([0-9]|[1-2][0-9]|3[0-2]))|(0\.0\.0\.0/0))$)</validValues>
                </string>
            </baseType>
            <validationRules>
                <rule exceptionText="" format="posix_ere" name="Pattern Constraint"><![CDATA[(^(((([1-9]|22[0-3]|2[01][0-9]|1[013456789][0-9]|12[012345689]|[1-9][0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9]))/([0-9]|[1-2][0-9]|3[0-2]))|(0\.0\.0\.0/0))$)]]></rule>
            </validationRules>
        </derivedDataType>
        <derivedDataType name="Ipv4UnicastAddressStr">
            <description>IPv4 address string, controlled by a regular expression.&#13;
&#13;
The address is specified in dotted-quad decimal notation in accordance with RFC791, without leading zeros.
&#13;
IPv4 addresses are within the range [1-126,128-223].[0-255].[0-255].[0-255], 7-15 characters. &#13;
Valid characters: 0123456789.&#13;
&#13;
Example: 1.1.1.1, 1.1.255.255</description>
            <domainExtension domain="ECIM">
                <extension name="originatingMimVersion" value="1"/>
                <extension name="originatingMimRelease" value="3"/>
                <extension name="originatingMimName" value="RtnCommonLibrary"/>
            </domainExtension>
            <baseType>
                <string>
                    <validValues>(^((22[0-3]|2[01][0-9]|1[013456789][0-9]|12[012345689]|[1-9][0-9]|[1-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9]))$)</validValues>
                </string>
            </baseType>
            <validationRules>
                <rule exceptionText="" format="posix_ere" name="Pattern Constraint"><![CDATA[(^((22[0-3]|2[01][0-9]|1[013456789][0-9]|12[012345689]|[1-9][0-9]|[1-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9]))$)]]></rule>
            </validationRules>
        </derivedDataType>
        <derivedDataType name="Priority">
            <description>Priority of a policy rule.&#13;&#13;
Priority values shall be unique amongst policy rules under the same policy.&#13;
Rule: valid values are 0 and positive integers.&#13;
Note: 0 is the highest priority, larger values give lower priority.&#13;
&#13;
Maximum possible range: 0..65535</description>
            <domainExtension domain="ECIM">
                <extension name="originatingMimVersion" value="1"/>
                <extension name="originatingMimRelease" value="0"/>
                <extension name="originatingMimName" value="RtnFilterTypes"/>
            </domainExtension>
            <baseType>
                <uint16/>
            </baseType>
        </derivedDataType>
        <derivedDataType name="RtnPBRIPv4_RoutingPolicyIpv4_userLabel">
            <baseType>
                <string>
                    <lengthRange>
                        <min>1</min>
                        <max>128</max>
                    </lengthRange>
                    <stringLength>
                        <subrange>
                            <min>1</min>
                            <max>128</max>
                        </subrange>
                    </stringLength>
                </string>
            </baseType>
        </derivedDataType>
        <derivedDataType name="RtnPBRIPv4_RoutingRuleIpv4_userLabel">
            <baseType>
                <string>
                    <lengthRange>
                        <min>1</min>
                        <max>128</max>
                    </lengthRange>
                    <stringLength>
                        <subrange>
                            <min>1</min>
                            <max>128</max>
                        </subrange>
                    </stringLength>
                </string>
            </baseType>
        </derivedDataType>
        <class name="NextHop">
            <description>Represents information about route defined by this nexthop and its parent RoutingRuleIpv4 MO. </description>
            <validationRules>
                <rule exceptionText="" format="ECIM_Schematron_1.0" name="NextHop"><![CDATA[<schema xmlns="http://purl.oclc.org/dsdl/schematron">
	<pattern>
		<rule>
		<assert test='every $address in @address satisfies (count(../../../InterfaceIPv4/AddressIPv4[substring-before(@address, "/") eq $address]) eq 0)'><value-of select="."/> Attribute address must not coincide with address configured on InterfaceIPv4 MO on this router.</assert>
		</rule>
	</pattern>
</schema>]]></rule>
            </validationRules>
            <dependenciesScript><![CDATA[<schema xmlns="http://purl.oclc.org/dsdl/schematron">
	<pattern>
		<rule>
		<assert test='every $address in @address satisfies (count(../../../InterfaceIPv4/AddressIPv4[substring-before(@address, "/") eq $address]) eq 0)'><value-of select="."/> Attribute address must not coincide with address configured on InterfaceIPv4 MO on this router.</assert>
		</rule>
	</pattern>
</schema>]]></dependenciesScript>
            <attribute name="address">
                <description>IP address of nexthop gateway of this route. </description>
                <mandatory/>
                <dataType>
                    <derivedDataTypeRef name="Ipv4UnicastAddressStr">
                        <mimName>RtnPBRIPv4</mimName>
                    </derivedDataTypeRef>
                </dataType>
                <dependencies>Must not coincide with address configured on InterfaceIPv4 MO on this router.
Must be unique under same RoutingRuleIpv4 MO.
</dependencies>
            </attribute>
            <attribute name="adminDistance">
                <description>Defines priority of this nexthop relative to other nexthops under same RoutingRuleIpv4 MO.

Two nexthops under same RoutingRuleIpv4 MO cannot have same adminDistance value.</description>
                <dataType>
                    <derivedDataTypeRef name="DistanceValueType">
                        <defaultValue>1</defaultValue>
                        <mimName>RtnPBRIPv4</mimName>
                    </derivedDataTypeRef>
                </dataType>
                <dependencies>adminDistance must be unique under the same RoutingRuleIpv4 MO.</dependencies>
            </attribute>
            <attribute name="bfdMonitoring">
                <description>This attribute controls whether availability of this route depends on BFD session that monitors nexthop.

If true, availability of this route depends on session state if a BFD session monitors nexthop.

If false, availability of this route does not depend on session state, even when BFD session monitors nexthop.

For details on how to enable BFD monitoring of nexthop, see InterfaceIPv4::bfdStaticRoutes.</description>
                <dataType>
                    <boolean>
                        <defaultValue>true</defaultValue>
                    </boolean>
                </dataType>
            </attribute>
            <attribute name="nextHopId">
                <description>Value component of the RDN. </description>
                <mandatory/>
                <noNotification/>
                <restricted/>
                <key/>
                <dataType>
                    <string/>
                </dataType>
            </attribute>
            <attribute name="nextHopState">
                <description>Reachability of next hop router and whether NextHop MO is currently active for routing rule. </description>
                <noNotification/>
                <readOnly/>
                <dataType>
                    <enumRef name="PBRNextHopState">
                        <mimName>RtnPBRIPv4</mimName>
                    </enumRef>
                </dataType>
            </attribute>
        </class>
        <class name="RoutingPolicyIpv4">
            <description>Represents IPv4 routing-policy used for PBR.

Referring to routing-policy from IP interface, incoming packets on that IP interface are routed according to classification configured in routing-policy.
Referring to routing-policy from Router MO, packets generated by Router MO are routed according to classification configured in routing-policy.
Routing policy comprises list of each policy rules, which contains set of criterions and forwarding action.

Dependencies:
Max number of RoutingPolicyIpv4 MOs are 16 for all Router MOs in node.</description>
            <validationRules>
                <rule exceptionText="" format="ECIM_Schematron_1.0" name="RoutingPolicyIpv4"><![CDATA[<schema xmlns="http://purl.oclc.org/dsdl/schematron">
<pattern>
<rule>
<assert test='are-distinct-values(./RoutingRuleIpv4/@priority)'><value-of select="."/> priority of RoutingRuleIpv4 MO must be unique under same RoutingPolicyIpv4 MO.</assert>
</rule>
</pattern>
</schema>]]></rule>
            </validationRules>
            <root/>
            <dependenciesScript><![CDATA[<schema xmlns="http://purl.oclc.org/dsdl/schematron">
<pattern>
<rule>
<assert test='are-distinct-values(./RoutingRuleIpv4/@priority)'><value-of select="."/> priority of RoutingRuleIpv4 MO must be unique under same RoutingPolicyIpv4 MO.</assert>
</rule>
</pattern>
</schema>]]></dependenciesScript>
            <attribute name="reservedBy">
                <description>Contains a list of MO instances that reserve this MO instance.</description>
                <readOnly/>
                <dataType>
                    <sequence>
                        <moRef name="ManagedObject"/>
                        <minLength>0</minLength>
                    </sequence>
                </dataType>
            </attribute>
            <attribute name="routingPolicyIpv4Id">
                <description>Value component of the RDN. </description>
                <mandatory/>
                <noNotification/>
                <restricted/>
                <key/>
                <dataType>
                    <string/>
                </dataType>
            </attribute>
            <attribute name="userLabel">
                <description>Label for free use. </description>
                <domainExtension domain="ECIM">
                    <extension name="isNillable" value="true"/>
                </domainExtension>
                <isNillable/>
                <dataType>
                    <derivedDataTypeRef name="RtnPBRIPv4_RoutingPolicyIpv4_userLabel">
                        <mimName>RtnPBRIPv4</mimName>
                    </derivedDataTypeRef>
                </dataType>
            </attribute>
        </class>
        <class name="RoutingRuleIpv4">
            <description>IPv4 Routing Rule, which contains criterions and forwarding action attributes. </description>
            <validationRules>
                <rule exceptionText="" format="ECIM_Schematron_1.0" name="RoutingRuleIpv4"><![CDATA[<schema xmlns="http://purl.oclc.org/dsdl/schematron">
    <pattern>
         <rule>
		 <assert test='are-distinct-values(./NextHop/@adminDistance)'><value-of select="."/> adminDistance of NextHop MO must be unique under the same RoutingRuleIpv4 MO.</assert>
		 <assert test='are-distinct-values(./NextHop/@address)'><value-of select="."/> address of NextHop MO must be unique under the same RoutingRuleIpv4 MO.</assert>
         </rule>
      </pattern>
</schema>]]></rule>
            </validationRules>
            <dependenciesScript><![CDATA[<schema xmlns="http://purl.oclc.org/dsdl/schematron">
    <pattern>
         <rule>
		 <assert test='are-distinct-values(./NextHop/@adminDistance)'><value-of select="."/> adminDistance of NextHop MO must be unique under the same RoutingRuleIpv4 MO.</assert>
		 <assert test='are-distinct-values(./NextHop/@address)'><value-of select="."/> address of NextHop MO must be unique under the same RoutingRuleIpv4 MO.</assert>
         </rule>
      </pattern>
</schema>]]></dependenciesScript>
            <attribute name="addrDst">
                <description>IPv4 destination address criterion.&#13;
&#13;
This criterion matches the IPv4 destination address field against the criterion’s configured destination subnet address.&#13;
&#13;
The criterion format is a dotted value/prefix length [ddd.ddd.ddd.ddd/dd]. &#13;
&#13;
If the value list is empty, any IP address will match this rule. </description>
                <domainExtension domain="ECIM">
                    <extension name="isNillable" value="true"/>
                </domainExtension>
                <isNillable/>
                <dataType>
                    <derivedDataTypeRef name="Ipv4RouteAddressAndPrefixLengthStr">
                        <mimName>RtnPBRIPv4</mimName>
                    </derivedDataTypeRef>
                </dataType>
            </attribute>
            <attribute name="addrSrc">
                <description>IPv4 source address criterion.&#13;
&#13;
This criterion matches the IPv4 source address field against the criterion’s configured source subnet address.&#13;
&#13;
The criterion format is a dotted value/prefix length [ddd.ddd.ddd.ddd/dd]. &#13;
&#13;
If the value list is empty, any IP address will match this rule. </description>
                <domainExtension domain="ECIM">
                    <extension name="isNillable" value="true"/>
                </domainExtension>
                <isNillable/>
                <dataType>
                    <derivedDataTypeRef name="Ipv4RouteAddressAndPrefixLengthStr">
                        <mimName>RtnPBRIPv4</mimName>
                    </derivedDataTypeRef>
                </dataType>
            </attribute>
            <attribute name="priority">
                <description>Rule priority. &#13;
&#13;
The rule priority orders the rules within a Routing Policy.  The ordering is from lesser numerical value towards greater numerical value.  The priorities must be unique among rules in a given Routing Policy.</description>
                <mandatory/>
                <dataType>
                    <derivedDataTypeRef name="Priority">
                        <mimName>RtnPBRIPv4</mimName>
                    </derivedDataTypeRef>
                </dataType>
                <dependencies>priority must be unique under the same RoutingPolicyIpv4 MO.</dependencies>
            </attribute>
            <attribute name="routingRuleIpv4Id">
                <description>Value component of the RDN. </description>
                <mandatory/>
                <noNotification/>
                <restricted/>
                <key/>
                <dataType>
                    <string/>
                </dataType>
            </attribute>
            <attribute name="userLabel">
                <description>Label for free use. </description>
                <domainExtension domain="ECIM">
                    <extension name="isNillable" value="true"/>
                </domainExtension>
                <isNillable/>
                <dataType>
                    <derivedDataTypeRef name="RtnPBRIPv4_RoutingRuleIpv4_userLabel">
                        <mimName>RtnPBRIPv4</mimName>
                    </derivedDataTypeRef>
                </dataType>
            </attribute>
        </class>
        <relationship name="RoutingPolicyIpv4_to_RoutingRuleIpv4">
            <containment>
                <parent>
                    <hasClass name="RoutingPolicyIpv4">
                        <mimName>RtnPBRIPv4</mimName>
                    </hasClass>
                </parent>
                <child>
                    <hasClass name="RoutingRuleIpv4">
                        <mimName>RtnPBRIPv4</mimName>
                    </hasClass>
                    <cardinality>
                        <min>0</min>
                        <max>8</max>
                    </cardinality>
                </child>
                <domainExtension domain="ECIM">
                    <extension name="canCreate" value="true"/>
                    <extension name="canDelete" value="true"/>
                </domainExtension>
            </containment>
        </relationship>
        <relationship name="RoutingRuleIpv4_to_NextHop">
            <containment>
                <parent>
                    <hasClass name="RoutingRuleIpv4">
                        <mimName>RtnPBRIPv4</mimName>
                    </hasClass>
                </parent>
                <child>
                    <hasClass name="NextHop">
                        <mimName>RtnPBRIPv4</mimName>
                    </hasClass>
                    <cardinality>
                        <min>1</min>
                        <max>2</max>
                    </cardinality>
                </child>
                <domainExtension domain="ECIM">
                    <extension name="canCreate" value="true"/>
                    <extension name="canDelete" value="true"/>
                </domainExtension>
            </containment>
        </relationship>
    </mim>
    <interMim>
        <relationship name="Router_to_RoutingPolicyIpv4">
            <domainExtension domain="CoreMW">
                <extension name="splitImmDn" value="false"/>
            </domainExtension>
            <containment>
                <parent>
                    <hasClass name="Router">
                        <mimName>RtnL3Router</mimName>
                    </hasClass>
                </parent>
                <child>
                    <hasClass name="RoutingPolicyIpv4">
                        <mimName>RtnPBRIPv4</mimName>
                    </hasClass>
                    <cardinality>
                        <min>0</min>
                        <max>16</max>
                    </cardinality>
                </child>
                <domainExtension domain="ECIM">
                    <extension name="canCreate" value="true"/>
                    <extension name="canDelete" value="true"/>
                </domainExtension>
            </containment>
        </relationship>
    </interMim>
</models>
